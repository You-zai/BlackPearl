# 多功能相册app——BlackPearl
起源
------
应计算机软件基础课程要求，以及自身对于人工智能前沿知识探索的欲望，故诞生了本产品：多功能相册app——BlackPearl。
  
    
使用手册
--------
### BlackPearl是一款面对设计师群体，用于管理图片的app。具有如下功能。
#### 主体功能
1. **相似查找：** 对相册中图片进行相似查找，搜索出的相似照片可以选择删除/不删除
   
2. **人物分类：** 对相册中的图片，按照主体人物不同进行分类，获得以同一人物为主体的多个相册    

3. **物品分类：** 对相册中的图片，按照物品不同进行分类，获得以同一物体为主体的多个相册

#### 其他功能  
1.  **自定义相册：** 新建、重命名、删除相册，在相册中添加图片；退出app后图片依然保留  

2.  **回收站：** 删除相册中的照片，并在回收站中恢复删除的照片

   
原理详解
--------
### 一、界面设计
BlackPearl采用Dracula（中文译为吸血鬼）配色方案，深色主题，低调奢华。   
界面布局采用PS进行设计，布局合理，简洁美观。


### 二、后端
#### （一）人脸识别

&emsp;&emsp;BlackPearl采用的人脸识别技术是基于C++开源库dlib中的深度学习模型，在Labeled Faces in the Wild人脸数据集进行测试，准确率达**99.38%**。&emsp;  
对于待判断的照片，先对人脸进行编码，再计算两两人脸的相似度。&emsp;  
下面以两张图片为例。&emsp;  
A是已知人脸库的图像，B是待检测的图像，将两张图片分别用face_encodings函数映射成一个向量，再利用两个向量的内积来衡量相似度。通过compare_faces函数确认是否是同一人脸。compare_faces中含有控制阈值的tolerance参数，tolerance值越低分类越严格。&emsp;  
上述函数都是支持多个人脸计算的。


#### （二）相似查找

&emsp;&emsp;汉明距离（Hamming Distance）
&emsp;&emsp;     
第一步，缩小尺寸。

将图片缩小到8x8的尺寸，总共64个像素。

第二步，简化色彩。

将缩小后的图片，转为64级灰度。

第三步，计算平均值。

计算所有64个像素的灰度平均值。

第四步，比较像素的灰度。

将每个像素的灰度，与平均值进行比较。大于或等于平均值，记为1；小于平均值，记为0。

第五步，计算哈希值。

将上一步的比较结果，组合在一起，就构成了一个64位的整数——图片的指纹。

第六步，计算汉明距离

得到指纹以后，就可以对比不同的图片，看看64位中有多少位是不一样的。在理论上，这等同于计算”汉明距离”（Hamming distance）。
如果不相同的数据位不超过5，就说明两张图片很相似；如果大于10，就说明这是两张不同的图片。

#### （三）物品分类
在ResNet34的网络基础上进行简化。
输入层（Linear一维平展）->ReLu激活层->Dropout层->Linear层->Softmax层

### 三、前端
（一）按钮、窗口调用

（二）json文件的使用  

致谢
------
产品名字BlackPearl黑珍珠，寓意“最艰辛岁月的结晶，历经磨难所以稀有、高贵”。   
感谢所有人的帮助。



